webpackJsonp([11],{1479:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,d,r,i=a(61),o=l(i),s=a(19),u=l(s),c=a(28),p=l(c),f=a(42),h=l(f),m=a(44),y=l(m),g=a(551),E=l(g),_=a(183),v=l(_),b=a(23),R=l(b),C=a(31),S=l(C),w=a(184),k=l(w),M=a(92),V=l(M),q=a(35),x=l(q),I=a(1),F=l(I),Y=a(8),D=l(Y),N=a(2),K=l(N),A=a(5),P=l(A),T=a(3),L=l(T),O=a(4),j=l(O),z=a(14),H=l(z);a(62),a(16),a(29),a(43),a(45),a(552),a(230),a(26),a(64),a(231),a(93),a(36),a(15);var J=a(0),Q=l(J),W=a(11),$=a(30),B=l($),G=a(13),U=l(G),X=a(41),Z=a(1485),ee=l(Z),te=H.default.Item,ae=(n=(0,W.connect)(function(e){return{endpoints:e.endpoints}}),d=H.default.create(),n(r=d(r=function(e){function t(){var e,a,l,n;(0,K.default)(this,t);for(var d=arguments.length,r=Array(d),i=0;i<d;i++)r[i]=arguments[i];return a=l=(0,L.default)(this,(e=t.__proto__||(0,D.default)(t)).call.apply(e,[this].concat(r))),l.state={addInputValue:"",modalVisible:!1,modalEditVisible:!1,editRecord:{},expandForm:!1,selectedRows:[],formValues:{},selectedRowKeys:[],totalCallNo:0,query:"",page:1,started_at:"",ended_at:""},l.handleMenuClick=function(e){switch(console.log("handleRemoveAll"),e.key){case"remove":l.handleRemoveAll()}},l.handleSelectRows=function(e){l.setState({selectedRows:e})},l.handleFormReset=function(){(0,l.props.dispatch)({type:"endpoints/fetch",payload:{}}),l.setState({page:1,query:"",started_at:"",ended_at:""})},l.handleSearch=function(e){(0,l.props.dispatch)({type:"endpoints/fetch",payload:(0,F.default)({},e)}),l.setState({query:e.query,started_at:e.started_at,ended_at:e.ended_at,page:e.page})},l.handleModalVisible=function(e){l.setState({modalVisible:!!e})},l.handleModalEditVisible=function(e){l.setState({modalEditVisible:!!e})},l.handleAddInput=function(e){l.setState({addInputValue:e.target.value})},l.handleAdd=function(){var e=l;l.props.dispatch({type:"endpoints/add",payload:{name:l.state.addInputValue},callback:function(){x.default.success("\u6dfb\u52a0\u5b9e\u4f8b\u6210\u529f"),e.setState({modalVisible:!1}),e.props.dispatch({type:"endpoints/fetch",payload:{query:e.state.query,started_at:e.state.started_at,ended_at:e.state.ended_at,page:e.state.page}})}})},l.handleEditInput=function(e){l.setState({editRecord:(0,F.default)({},l.state.editRecord,{description:e.target.value})})},l.handleEdit=function(){console.log(l.state.editRecord.description);var e=l;l.props.dispatch({type:"endpoints/edit",payload:{id:l.state.editRecord.id,description:l.state.editRecord.description},callback:function(){x.default.success("\u4fee\u6539\u5b9e\u4f8b\u6210\u529f"),e.setState({modalEditVisible:!1}),e.props.dispatch({type:"endpoints/fetch",payload:{query:e.state.query,started_at:e.state.started_at,ended_at:e.state.ended_at,page:e.state.page}})}})},l.handleRemove=function(e){var t=l;l.props.dispatch({type:"endpoints/remove",payload:e,callback:function(){x.default.success("\u5220\u9664\u5b9e\u4f8b\u6210\u529f"),t.props.dispatch({type:"endpoints/fetch",payload:{query:t.state.query,started_at:t.state.started_at,ended_at:t.state.ended_at,page:t.state.page}})}})},l.handleRemoveAll=function(){console.log(l.state.selectedRowKeys)},l.handleRowSelectChange=function(e,t){var a=t.reduce(function(e,t){return e+parseFloat(t.callNo,10)},0);l.handleSelectRows&&l.handleSelectRows(t),l.setState({selectedRowKeys:e,totalCallNo:a})},l.cleanSelectedKeys=function(){l.handleRowSelectChange([],[])},l.handPageChange=function(e){l.handleSearch({page:e,query:l.state.query,ended_at:l.state.ended_at,started_at:l.state.started_at})},n=a,(0,L.default)(l,n)}return(0,j.default)(t,e),(0,P.default)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"endpoints/fetch",payload:{page:1}})}},{key:"render",value:function(){var e=this,t=this.props.endpoints,a=t.data,l=t.meta,n=t.loading,d=this.state,r=d.selectedRows,i=d.modalVisible,s=d.addInputValue,c=d.selectedRowKeys,f=d.modalEditVisible,m=d.editRecord,g=[{title:"\u5b9e\u4f8b\u540d\u79f0",dataIndex:"name",render:function(e,t,a){return Q.default.createElement(X.Link,{to:"/access-management/endpoints/"+t.id+"/device"},e)}},{title:"\u63cf\u8ff0",dataIndex:"description",className:"description",render:function(t,a,l){return Q.default.createElement("div",{className:"",title:t},t&&t.length>20?t.substring(0,20)+"...":t,Q.default.createElement(S.default,{type:"edit",className:"edit",style:{cursor:"pointer"},onClick:function(){e.setState({editRecord:a}),e.handleModalEditVisible(!0)}}))}},{title:"\u5730\u5740",dataIndex:"ip",render:function(e,t,a){return Q.default.createElement("div",null,Q.default.createElement("p",null,t.mqtt_hostname),Q.default.createElement("p",null,t.mqtt_tls_hostname),Q.default.createElement("p",null,t.websocket_hostname))}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at",render:function(e){return Q.default.createElement("span",null,(0,U.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u64cd\u4f5c",width:60,render:function(t,a,l){return Q.default.createElement("p",null,Q.default.createElement(V.default,{placement:"topRight",title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",onConfirm:function(){return e.handleRemove(a.id)}},Q.default.createElement("a",{href:""},"\u5220\u9664")))}}],_=Q.default.createElement(k.default,{selectedKeys:[],onClick:this.handleMenuClick},Q.default.createElement(k.default.Item,{key:"remove"},"\u5220\u9664\u9009\u4e2d\u5185\u5bb9")),b={selectedRowKeys:c,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return Q.default.createElement(B.default,{title:"\u5b9e\u4f8b\u5217\u8868",breadcrumb:[{name:"\u63a5\u5165\u7ba1\u7406"},{name:"\u5b9e\u4f8b\u5217\u8868"}]},Q.default.createElement(p.default,{bordered:!1},Q.default.createElement("div",{className:"tableList"},Q.default.createElement("div",{className:"tableListForm"},Q.default.createElement(ee.default,{handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),Q.default.createElement("div",{className:"tableListOperator"},Q.default.createElement(R.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u65b0\u5efa"),r.length>0&&Q.default.createElement("span",null,Q.default.createElement(v.default,{overlay:_},Q.default.createElement(R.default,null,"\u66f4\u591a\u64cd\u4f5c ",Q.default.createElement(S.default,{type:"down"}))))),Q.default.createElement(E.default,{message:Q.default.createElement("p",null,"\u5df2\u9009\u62e9 ",Q.default.createElement("a",{style:{fontWeight:600}},c.length)," \u9879\xa0\xa0",Q.default.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"\u6e05\u7a7a")),type:"info",showIcon:!0}),Q.default.createElement(y.default,{loading:n,rowKey:function(e){return e.id},rowSelection:b,dataSource:a,columns:g,pagination:!1,onChange:this.handleTableChange}),Q.default.createElement(h.default,{showQuickJumper:!0,className:"pagination",total:l.pagination.total,current:l.pagination.current_page,pageSize:l.pagination.per_page,style:{marginTop:"10px"},onChange:this.handPageChange}))),Q.default.createElement(o.default,{title:"\u521b\u5efa\u5b9e\u4f8b",visible:i,onOk:this.handleAdd,onCancel:function(){return e.handleModalVisible()}},Q.default.createElement(te,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5b9e\u4f8b\u540d\u79f0",extra:"\u8bf4\u660e\uff1a\u540d\u79f0\u7531\u82f1\u6587\u5b57\u6bcd\uff08a-z\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09\u3001\u6570\u5b57\uff080-9\uff09\u3001\u4e0b\u5212\u7ebf\u201c_\u201d\u4ee5\u53ca\u8fde\u5b57\u7b26\u201c-\u201d\uff08\u5373\u4e2d\u6a2a\u7ebf\uff09\u6784\u6210\uff0c\u4e0d\u80fd\u4f7f\u7528\u7a7a\u683c\u53ca\u7279\u6b8a\u5b57\u7b26\uff08\u5982\uff01\u3001$\u3001&\u3001?\u7b49\uff09\u3002\u201c-\u201d \u4e0d\u80fd\u5355\u72ec\u6216\u8fde\u7eed\u4f7f\u7528\uff0c\u4e0d\u80fd\u653e\u5728\u5f00\u5934\u6216\u7ed3\u5c3e\u3002"},Q.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165",onChange:this.handleAddInput,value:s}))),Q.default.createElement(o.default,{title:"\u4fee\u6539\u63cf\u8ff0",visible:f,onOk:this.handleEdit,onCancel:function(){return e.handleModalEditVisible()}},Q.default.createElement(te,{labelCol:{span:5},wrapperCol:{span:15},label:"\u63cf\u8ff0"},Q.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165",type:"textarea",rows:4,onChange:this.handleEditInput,value:m.description}))))}}]),t}(J.PureComponent))||r)||r);t.default=ae,e.exports=t.default},1485:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(14),d=l(n),r=a(47),i=l(r),o=a(23),s=l(o),u=a(19),c=l(u),p=a(1),f=l(p),h=a(8),m=l(h),y=a(2),g=l(y),E=a(5),_=l(E),v=a(3),b=l(v),R=a(4),C=l(R),S=a(49),w=l(S);a(15),a(48),a(26),a(16),a(50);var k=a(0),M=l(k),V=a(13),q=l(V),x=w.default.RangePicker,I=d.default.Item,F=function(e){function t(e){(0,g.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,m.default)(t)).call(this,e));return a.handleSubmit=function(e){e.preventDefault();var t=a.props;t.dispatch;t.form.validateFields(function(e,t){if(!e){var l=t["range-time-picker"],n={query:t.query,started_at:l?(0,q.default)(l[0]).format("YYYY-MM-DD"):"",ended_at:l?(0,q.default)(l[1]).format("YYYY-MM-DD"):""};a.props.handleSearch((0,f.default)({},n,{page:1}))}})},a.handleFormReset=function(){a.props.form.resetFields(),a.props.handleFormReset()},a.state={},a}return(0,C.default)(t,e),(0,_.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement(d.default,{onSubmit:this.handleSubmit,layout:"inline"},M.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(I,{label:this.props.inputText?this.props.inputText:"\u540d\u79f0"},e("query")(M.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165"}))),M.default.createElement(I,{label:this.props.dateText?this.props.dateText:"\u521b\u5efa\u65f6\u95f4"},e("range-time-picker",{initialValue:this.props.initRange?this.props.initRange:""})(M.default.createElement(x,{allowClear:!this.props.initRange}))),M.default.createElement(I,null,M.default.createElement(s.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(s.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))}}]),t}(k.Component),Y=d.default.create()(F);t.default=Y,e.exports=t.default}});