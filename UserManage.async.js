webpackJsonp([6],{1482:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d,r,n,u=a(61),s=l(u),i=a(28),o=l(i),c=a(42),p=l(c),f=a(44),m=l(f),h=a(23),y=l(h),_=a(183),E=l(_),b=a(31),g=l(b),v=a(92),R=l(v),k=a(68),V=l(k),S=a(184),q=l(S),C=a(35),x=l(C),M=a(1),F=l(M),w=a(8),D=l(w),I=a(2),P=l(I),j=a(5),Y=l(j),N=a(3),O=l(N),T=a(4),L=l(T),A=a(14),J=l(A);a(62),a(29),a(43),a(45),a(26),a(230),a(64),a(93),a(69),a(231),a(36),a(15);var K=a(0),z=l(K),G=a(11),Q=a(1506),U=l(Q),W=a(1485),B=l(W),H=a(30),X=l(H),Z=(d=(0,G.connect)(function(e){return{user:e.user}}),r=J.default.create(),d(n=r(n=function(e){function t(){var e,a,l,d;(0,P.default)(this,t);for(var r=arguments.length,n=Array(r),u=0;u<r;u++)n[u]=arguments[u];return a=l=(0,O.default)(this,(e=t.__proto__||(0,D.default)(t)).call.apply(e,[this].concat(n))),l.state={modalVisible:!1,modalEditVisible:!1,editRecord:{},expandForm:!1,selectedRows:[],formValues:{},selectedRowKeys:[],totalCallNo:0,query:"",page:1,started_at:"",ended_at:""},l.handleFormReset=function(){(0,l.props.dispatch)({type:"user/fetch",payload:{}}),l.setState({page:1,query:"",started_at:"",ended_at:""})},l.handleSearch=function(e){(0,l.props.dispatch)({type:"user/fetch",payload:(0,F.default)({},e)}),l.setState({query:e.query,started_at:e.started_at,ended_at:e.ended_at,page:e.page})},l.handleModalVisible=function(e){l.setState({modalVisible:!!e})},l.handleModalEditVisible=function(e){l.setState({modalEditVisible:!!e})},l.handleAdd=function(){var e=l,t=l.formRef.props.form.getFieldsValue();console.log("formValues",t),l.props.dispatch({type:"user/add",payload:{data:(0,F.default)({},t,{role_id:t.role_id.key})},callback:function(){x.default.success("\u6dfb\u52a0\u7528\u6237\u6210\u529f"),e.setState({modalVisible:!1}),e.props.dispatch({type:"user/fetch",payload:{query:e.state.query,started_at:e.state.started_at,ended_at:e.state.ended_at,page:e.state.page}})}})},l.handleEdit=function(){var e=l,t=l.editFormRef.props.form.getFieldsValue();console.log("formValues",t),l.props.dispatch({type:"user/edit",payload:{data:(0,F.default)({},t,{role_id:t.role_id.key,id:l.state.editRecord.id})},callback:function(){x.default.success("\u4fee\u6539\u7528\u6237\u6210\u529f"),e.setState({modalEditVisible:!1}),e.props.dispatch({type:"user/fetch",payload:{query:e.state.query,started_at:e.state.started_at,ended_at:e.state.ended_at,page:e.state.page}})}})},l.handleRemove=function(e){var t=l;l.props.dispatch({type:"user/remove",payload:{id:e},callback:function(){x.default.success("\u5220\u9664\u7528\u6237\u6210\u529f"),t.props.dispatch({type:"user/fetch",payload:{query:t.state.query,started_at:t.state.started_at,ended_at:t.state.ended_at,page:t.state.page}})}})},l.handleEditStatus=function(e,t){var a=0;a=1===t?-1:1;var d=l;l.props.dispatch({type:"user/editStatus",payload:{data:{id:e,status:a}},callback:function(){x.default.success("\u4fee\u6539\u72b6\u6001\u6210\u529f"),d.props.dispatch({type:"user/fetch",payload:{query:d.state.query,started_at:d.state.started_at,ended_at:d.state.ended_at,page:d.state.page}})}})},l.handleResetPassword=function(e){var t=l;l.props.dispatch({type:"user/resetPassword",payload:{id:e},callback:function(){x.default.success("\u91cd\u7f6e\u5bc6\u7801\u6210\u529f"),t.props.dispatch({type:"user/fetch",payload:{query:t.state.query,started_at:t.state.started_at,ended_at:t.state.ended_at,page:t.state.page}})}})},l.handPageChange=function(e){l.handleSearch({page:e,query:l.state.query,ended_at:l.state.ended_at,started_at:l.state.started_at})},d=a,(0,O.default)(l,d)}return(0,L.default)(t,e),(0,Y.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"user/fetch",payload:{page:1}}),e({type:"usergroup/fetch",payload:{return:"all"}})}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:"usergroup/reset"})}},{key:"render",value:function(){var e=this,t=this.props.user,a=t.data,l=t.meta,d=t.loading,r=this.state,n=r.modalVisible,u=r.modalEditVisible,i=r.editRecord,c=z.default.createElement(q.default,null,z.default.createElement(q.default.Item,null,z.default.createElement("a",{onClick:function(){e.handleResetPassword(e.state.editRecord.id)}},"\u91cd\u7f6e\u5bc6\u7801")),-1===this.state.editRecord.lock&&z.default.createElement(q.default.Item,null,z.default.createElement("a",{onClick:function(){e.handleRemove(e.state.editRecord.id)}},"\u5220\u9664"))),f=[{title:"\u7528\u6237\u8d26\u53f7",dataIndex:"username"},{title:"\u90e8\u95e8",dataIndex:"role_display_name"},{title:"\u59d3\u540d",dataIndex:"real_name"},{title:"\u5de5\u53f7",dataIndex:"job_number"},{title:"\u7535\u8bdd",dataIndex:"mobile"},{title:"\u72b6\u6001",dataIndex:"status",render:function(e,t,a){return z.default.createElement("span",null,z.default.createElement(V.default,{status:-1===e?"error":"success"}),t.status_explain)}},{title:"\u64cd\u4f5c",width:170,render:function(t,a,l){return z.default.createElement("p",null,1!==a.lock&&z.default.createElement("a",{href:"javascript:;",onClick:function(){e.setState({editRecord:a,modalEditVisible:!0})}},"\u7f16\u8f91"),z.default.createElement("span",{className:"ant-divider"}),z.default.createElement(R.default,{placement:"topRight",title:"\u786e\u5b9a\u8981"+(1===a.status?"\u7981\u7528":"\u542f\u7528")+"\u5417?",onConfirm:function(){return e.handleEditStatus(a.id,a.status)}},z.default.createElement("a",{href:"javascript:;"},1===a.status?"\u7981\u7528":"\u542f\u7528")),z.default.createElement("span",{className:"ant-divider"}),z.default.createElement(E.default,{onVisibleChange:function(t){t?e.setState({editRecord:a}):e.setState({editRecord:{}})},overlay:c},z.default.createElement("a",null,"\u66f4\u591a",z.default.createElement(g.default,{type:"ellipsis"}))))}}];return z.default.createElement(X.default,{title:{label:"\u7528\u6237\u7ba1\u7406"},breadcrumb:[{name:"\u7cfb\u7edf\u7ba1\u7406"},{name:"\u7528\u6237\u7ba1\u7406"}]},z.default.createElement(o.default,{bordered:!1},z.default.createElement("div",{className:"tableList"},z.default.createElement("div",{className:"tableListForm"},z.default.createElement(B.default,{handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),z.default.createElement("div",{className:"tableListOperator"},z.default.createElement(y.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u521b\u5efa\u7528\u6237")),z.default.createElement(m.default,{loading:d,rowKey:function(e){return e.id},dataSource:a,columns:f,pagination:!1}),z.default.createElement(p.default,{showQuickJumper:!0,className:"pagination",total:l.pagination.total,current:l.pagination.current_page,pageSize:l.pagination.per_page,onChange:this.handPageChange}))),z.default.createElement(s.default,{title:"\u521b\u5efa\u7528\u6237",visible:n,onOk:this.handleAdd,onCancel:function(){return e.handleModalVisible()}},z.default.createElement(U.default,{wrappedComponentRef:function(t){return e.formRef=t}})),z.default.createElement(s.default,{key:Date.parse(new Date),title:"\u4fee\u6539\u7528\u6237",visible:u,onOk:this.handleEdit,onCancel:function(){return e.handleModalEditVisible()}},z.default.createElement(U.default,{wrappedComponentRef:function(t){return e.editFormRef=t},editRecord:i})))}}]),t}(K.PureComponent))||n)||n);t.default=Z,e.exports=t.default},1485:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(14),r=l(d),n=a(47),u=l(n),s=a(23),i=l(s),o=a(19),c=l(o),p=a(1),f=l(p),m=a(8),h=l(m),y=a(2),_=l(y),E=a(5),b=l(E),g=a(3),v=l(g),R=a(4),k=l(R),V=a(49),S=l(V);a(15),a(48),a(26),a(16),a(50);var q=a(0),C=l(q),x=a(13),M=l(x),F=S.default.RangePicker,w=r.default.Item,D=function(e){function t(e){(0,_.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return a.handleSubmit=function(e){e.preventDefault();var t=a.props;t.dispatch;t.form.validateFields(function(e,t){if(!e){var l=t["range-time-picker"],d={query:t.query,started_at:l?(0,M.default)(l[0]).format("YYYY-MM-DD"):"",ended_at:l?(0,M.default)(l[1]).format("YYYY-MM-DD"):""};a.props.handleSearch((0,f.default)({},d,{page:1}))}})},a.handleFormReset=function(){a.props.form.resetFields(),a.props.handleFormReset()},a.state={},a}return(0,k.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return C.default.createElement(r.default,{onSubmit:this.handleSubmit,layout:"inline"},C.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},C.default.createElement(w,{label:this.props.inputText?this.props.inputText:"\u540d\u79f0"},e("query")(C.default.createElement(c.default,{placeholder:"\u8bf7\u8f93\u5165"}))),C.default.createElement(w,{label:this.props.dateText?this.props.dateText:"\u521b\u5efa\u65f6\u95f4"},e("range-time-picker",{initialValue:this.props.initRange?this.props.initRange:""})(C.default.createElement(F,{allowClear:!this.props.initRange}))),C.default.createElement(w,null,C.default.createElement(i.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),C.default.createElement(i.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))}}]),t}(q.Component),I=r.default.create()(D);t.default=I,e.exports=t.default},1506:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var d,r,n=a(14),u=l(n),s=a(19),i=l(s),o=a(70),c=l(o),p=a(32),f=l(p),m=a(1),h=l(m),y=a(8),_=l(y),E=a(2),b=l(E),g=a(5),v=l(g),R=a(3),k=l(R),V=a(4),S=l(V);a(15),a(16),a(77),a(33);var q=a(0),C=l(q),x=a(11),M=u.default.Item,F=c.default.Group,w=f.default.Option,D=(d=(0,x.connect)(function(e){return{usergroup:e.usergroup}}))(r=function(e){function t(e){(0,b.default)(this,t);var a=(0,k.default)(this,(t.__proto__||(0,_.default)(t)).call(this,e));return a.state={},a}return(0,S.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}}},t=this.props.form.getFieldDecorator;return C.default.createElement("div",null,C.default.createElement(u.default,{onSubmit:this.handleSubmit},C.default.createElement(M,(0,h.default)({},e,{label:C.default.createElement("span",null,"\u8d26\u53f7")}),t("username",{initialValue:this.props.editRecord?this.props.editRecord.username:"",rules:[{required:!0,message:"\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}]})(C.default.createElement(i.default,{disabled:!!this.props.editRecord}))),C.default.createElement(M,(0,h.default)({label:"\u7528\u6237\u7ec4"},e),t("role_id",{initialValue:this.props.editRecord?{key:this.props.editRecord.role_id.toString(),label:this.props.editRecord.role_display_name}:{key:"",label:""},rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7528\u6237\u7ec4"}]})(C.default.createElement(f.default,{labelInValue:!0},this.props.usergroup.data.map(function(e,t){return C.default.createElement(w,{key:e.id,value:e.id.toString()},e.display_name)})))),C.default.createElement(M,(0,h.default)({},e,{label:C.default.createElement("span",null,"\u5de5\u53f7")}),t("job_number",{initialValue:this.props.editRecord?this.props.editRecord.job_number:""})(C.default.createElement(i.default,null))),C.default.createElement(M,(0,h.default)({},e,{label:C.default.createElement("span",null,"\u59d3\u540d")}),t("real_name",{initialValue:this.props.editRecord?this.props.editRecord.real_name:""})(C.default.createElement(i.default,null))),C.default.createElement(M,(0,h.default)({},e,{label:"\u6027\u522b"}),t("sex",{initialValue:this.props.editRecord?this.props.editRecord.sex:"\u4fdd\u5bc6"})(C.default.createElement(F,null,C.default.createElement(c.default,{value:"\u7537"},"\u7537"),C.default.createElement(c.default,{value:"\u5973"},"\u5973"),C.default.createElement(c.default,{value:"\u4fdd\u5bc6"},"\u4fdd\u5bc6")))),C.default.createElement(M,(0,h.default)({},e,{label:C.default.createElement("span",null,"\u7535\u8bdd")}),t("mobile",{initialValue:this.props.editRecord?this.props.editRecord.mobile:""})(C.default.createElement(i.default,null)))))}}]),t}(q.Component))||r,I=u.default.create()(D);t.default=(0,x.connect)()(I),e.exports=t.default}});